---
layout:     post
title:      工具篇1
subtitle:   记录下日常开发有用到或收集的小方法
date:       2019-08-14
author:     WHD
header-img: img/post-bg-ios10.jpg
catalog: 	 true
tags:
    - JS
    - 工具
    - 正则
    - input
    
---

#工具篇1#
**记录下日常开发有用到或收集的小方法**


### 1.邮箱验证正则公式 ###

网上找到的比较简单些的验证，如[比较正式验证邮箱的正则][1]
```
/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/ 
```

来自项目使用过的例子：

```
var ret = /^[A-Za-z0-9]+([-_.][A-Za-z0-9]+)*@([A-Za-z0-9][-A-Za-z0-9]+).gov.hk+$/;
ret.test(str)
```

===========2019-05-25=======

过了一段时间，好像上面👆的验证效果不太满足现实需要，下面👇再补充个
邮箱正则验证

```
/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/
```

### 2.用正则表达式获取url中的想要的参数（get类型URL）

个人的使用场景是：
有个前后端未分离maven项目，需要做iframe父子页面间传值，当时采用的是父页面把参数以URL形式组装并通过模板框架内部的iframe字符串传值方式发出，在子页面初次加载时，获取window的url并截取其参数，用来进行另外的接口请求。

```
function getUrlParam(name) { 
	var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
	var r = window.location.search.substr(1).match(reg);
	console.log(window.location.search);
	if (r != null) return unescape(r[2]); return null;
}
```

只需调用上面👆方法，传想要获取数据的对应key关键字符，方法就会获取当前window的URL路径并与正则进行匹配，然后返回想要的数据。

### 3.限制input框只能输入数字或’-’,若输入则可看到但会立马消失

@使用参考代码
```
<input type="text" id="question" maxlength="100" style="width: 38.1%;display: inline-block;" class="form-control" autocomplete="off" onkeyup="value=value.replace(/[^\d-]/g,'')">
```

使用正则，可以帮助我们很快的实现一些验证/过滤性功能，下面👇是一些对input输入内容进行验证的正则表达式，**实现若在input输入违规字符，可以看到但会立马消失**

① 令input框只能输入**数字或’-’**,不能输入其他字符包括中英文、特殊字符
```onkeyup="value=value.replace(/[^\d-]/g,'')```
② 令input框只能输入 **数字**
```onkeyup="value=value.replace(/[^\d]/g,'')```


### 4.对第3.的补充和延伸学习

引用上面👆**第3.**，若要
③ 令input不能输入单引号、双引号，**<font color=#ff0000>注意引号要为英文字符</font>**，如此便可让英式单引号和双引号时 可以看到但也会被置空
```onkeyup="value=value.replace(/['\"]/g,'’)```

④ 令input只能输入单双引号
```onkeyup="value=value.replace(/[^'\"]/g,’’)```


好，下面说下两种input内容正则验证的不同，下图第一种方法会检测输入的每一个值，但不合适的会把整个value值置空。第二种方法好些，检测每一个值，但只是把不合规矩的置空，其他的不改变。
![](http://wason.club/img/regexInput.png)
使用方式：
```
第一种方法 onkeyup="value=contentLimit(value)"
第二种方法 onkeyup="value=charactersLimit(value)"
```

### 5.数组比较，一个对象数组，一个普通数组，要从对象数组中找到有name值跟普通数组的元素值相同的，就从对象数组中删掉
> 案例（图是网上找的，下面代码把name改为id就可以了）
![](http://wason.club/img/arrCompare.png)
**方法(可以兼容IE)**

```Python
unique (obj, ary){
	return obj.filter(function(item){
		return ary.indexOf(item.name) == -1;
	})
}
```
如果最后改 ```return ary.indexOf(item.id) != -1```则会返回被删除掉的对象数组的元素数据.
当然，也有使用ES6的，一句代码搞定，不过不兼容IE
```
const newArr = obj.filter(item => !ary.includes(item.id))
// 因为array.includes()不支持ie
```


### 6.实现选择好相关格式的日期后，在某地显示出大写的日期(日期格式要为 yyyy-mm-dd)
```
先定义个数组
var weekDay = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]
var date = $('#releaseDate').val(); // 获取到日期的数值,且日期格式要为 2018-02-16
meetDate = date.split("-“); // 拼接成数组
var dt = new Date(meetDate[0],(meetDate[1]-1),meetDate[2]); // 月数要减1
$('#weekDay').text(weekDay[dt.getDay()]); // weekDay数组顺序要按上面排序
```

> To be continued



[1]:https://www.jb51.net/article/31182.htm
